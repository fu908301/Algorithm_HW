<!DOCTYPE html>
<html lang="zh">

  <head>
    <meta charset="big5"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Voronoi Diagram</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/scrolling-nav.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Voronoi Diagram</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
           <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#spec">軟體規格書</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#desc">軟體說明</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#desi">程式設計</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#result">軟體測試與實驗結果</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#conc">結論與心得</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#appen">附錄</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

   <!-- 首頁 -->
    <section id="intro" class="intro-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Voronoi Diagram</h1>
                    <h3>資工碩一 傅正安 M063040018</h3>
                </div>
            </div>
        </div>
    </section>

    <section id="spec">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;軟體規格書</h2>
            <h4><strong>輸入規格</strong></h4>
            <ol>
              <li>在畫布上用滑鼠任意點擊,顯示點的位置</li>
              <li>利用鍵盤輸入滑鼠點的位置,並顯示</li>
              <li>利用檔案輸入點的位置,並顯示</li>
            </ol>
			<h4><strong>輸出規格</strong></h4>
            <ol>
              <li>直接在畫布上顯示執行結果</li>
              <li>按下SAVE,輸出「輸出文字檔」</li>
              <li>輸出文字檔案範例：
				<div class="panel panel-default">
					<div class="panel-body">
						P 100 100<br />
						P 100 200<br />
					    P 200 100<br />
						P 200 200<br />
					    E 0 150 150 150<br />
						E 150 0 150 150<br />
						E 150 150 150 600<br />
						E 150 150 600 150<br />
					</div>
                </div>
			</li>
            </ol>
			<h4><strong>主介面</strong></h4>
			<img src="pic/1.PNG" />
			<h4><strong>功能</strong></h4>
			<ul>
				<li>RUN:執行程式</li>
				<li>STEP:一步一步執行</li>
				<li>CLEAN:清空畫布</li>
				<li>LOAD:讀檔</li>
				<li>NEXT:下一筆測資</li>
				<li>SAVE:將結果儲存</li>
				<li>SET:將輸入的XY軸顯示在畫布上</li>
			</ul>
			<h4><strong>軟體測試規劃書</strong></h4>
			以「隨機+共線」的情況，來測試以下幾種點個數的範圍：
             <ul>
				<li>1∼3 點：三點以下直接解</li>
                <li>4∼6 點：三點以上會 Divide 及 Merge 一次</li>
                <li>7∼12 點：七點以上會 Divide 及 Merge 多次 </li>
			    <li>大於 12 點：多點測試</li>
              </ul>
          </div>
        </div>
      </div>
    </section>

    <section id="desc" class="bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;軟體說明</h2>
			<h4><strong>安裝說明</strong></h4>
			下載主程式後，執行HW.jar即可
            <h4><strong>繪製點座標</strong></h4>
			在白色區域繪製點座標，有以下幾種方法
			<ul>
				<li>滑鼠點擊畫布區域</li>
                <li>利用LOAD讀取測資</li>
                <li>在文字輸入格內輸入點座標，並且按下SET按鈕 </li>
             </ul>
			 <img src="pic/2.PNG" />
			 <h4><strong>繪製Voronoi Diagram</strong></h4>
			 <ul>
				<li>按下RUN，直接繪製最終結果</li>
                <li>按下STEP，一步一步繪製結果</li>
             </ul>
			 <img src="pic/1.PNG" />
			 <img src="pic/3.PNG" />
          </div>
        </div>
      </div>
    </section>

    <section id="desi">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;程式設計</h2>
            <h4><strong>資料結構</strong></h4>
			資料結構的部分我使用了以下三個資料結構:
			<ol>
				<li>
					Point:儲存點的資料結構
						<pre>
double x;//儲存該點的x座標
double y;//儲存該點的y座標
						</pre>
				</li>
				<li>
					Line:儲存線段的資料結構
					<pre>
Point a;//儲存線段的第一個點
Point b;//儲存線段的第二個點
					</pre>
				</li>
				<li>
					Point_Two_Way:儲存兩點以及這兩點的中垂線
					<pre>
Point a;//第一個點
Point b;//第二個點
Line line;//儲存ab兩點的中垂線
					</pre>
				</li>
			</ol>
			<h4><strong>三點解法</strong></h4>
				我一開始的作法是先求出外心座標，然後讓外心座標與三點的中點相連，最後靠著這個向量延伸出去，但是發現三角形的形狀如果是直角三角形或者鈍角三角形，此方法會有問題，於是後來想到有外積這個東西，先利用外積，將三個點逆時針排列，再來利用公式可以求出任兩點向外的法向量，最後讓這個法向量從外心直接延伸出去即可。
				<img src="pic/4.png"/>
			<h4><strong>四點以上解法</strong></h4>
			<h5>演算法過程:</h5>
			<ol>
				<li>將點按照X軸排序之後，分成左右兩邊。</li>
				<li>分別求出Voronoi Diagram。</li>
				<li>找出convexhull的上下切線。</li>
				<li>將兩邊的Voronoi Diagram merge 起來。</li>
				<li>將多餘的線段消除</li>
			</ol>
			</br>
			<h5><strong>切割:</strong></h5>
			切割就是先將點依照X軸做排序之後再照Y軸排序，然後分成兩邊用ArrayList做儲存的動作。
			</br>
			<img src="pic/5.PNG">
			</br>
			<h5><strong>分別求Voronoi Diagram:</strong></h5>
			就是做完切割之後，分別求出Convex hull以及Voronoi Diagram，如下圖，紅色的是Convexhull，黑色的是Voronoi Diagram。
			<img src="pic/6.PNG">
			</br>
			<h5><strong>找出convex hull的上下切線:</strong></h5>
			&emsp; 求出全部點的Convex Hull，找出橫跨左右兩部分的邊，即為上下切線。
			<h5>Merge:</h5>
			<img src="pic/7.PNG">
			<br/>
			&emsp; 先從convex hull的上切線當掃描線，以掃描線的法向量當作向量開始往下畫，碰到別的線段之後暫停(藍色為Hyper Plane，紅色為掃描線)。
			<img src="pic/8.PNG">
			<br/>
			&emsp; 接著因為碰到的是左邊的線段，所以左邊下面那個點當作新的掃描線其中一點，右邊的維持不變，然後新的掃描線的法向量繼續往下畫。
			<img src="pic/9.PNG">
			<br/>
			&emsp; 接著碰到右邊的線段，右邊下面那個點當作新的掃描線其中一點，左邊維持不變，此時發現線段為convex hull的下切線，於是無限延伸出去，Merge結束。
			</br>
			<h5><strong>銷線</strong></h5>
			<img src="pic/11.PNG">
			</br>
			&emsp;我是以Hyper plane碰到Voronoi Diagram之後，依照轉彎的方向去判斷，如上圖，AB線段與AE線段是逆時針轉，於是我們要刪除同樣逆時針旋轉的線段，以上圖來看，因為AB與AD是逆時針旋轉，所以我們要刪掉AD線段；假設AB與AE線段是順時針轉，我們就是要刪掉順時針旋轉的那個線段。 
          </div>
        </div>
      </div>
    </section>

	<section id="result">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;軟體測試與實驗結果</h2>
				<h4><strong>執行環境</strong></h4>
				<ul>
					<li>程式語言:Java</li>
					<li>作業系統:Windows 10</li>
					<li>編輯器:intellij IDEA</li>
				</ul>
				<img src="pic/12.PNG">
				<img src="pic/13.PNG">
				<h4><strong>實驗結果</strong></h4>
				經過測試發現，兩點及三點皆可正常執行，四點在大部分情況可正常執行，少部分因為未知的BUG會無法正常執行，五點以上則是皆無法正常執行。
				<img src="pic/14.PNG">
				<img src="pic/15.PNG">
				<img src="pic/16.PNG">
				<img src="pic/17.PNG">
          </div>
        </div>
      </div>
    </section>
	<section id="conc">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;結論與心得</h2>
            這次的作業相當有深度而且有難度，因此花了不少時間在這次作業上，期中進度上，因為有三種三角形，分別是鈍角銳角和直角，原本是想分成三種不同的CASE去寫，但是後來與同學討論之後想到有外積的公式可以使用，於是期中的部分就找到通用解，所有三角形皆可處理；期末的部分難度就高很多，因為資料結構較為複雜，而且要考慮到的特殊情況更多，於是花了較多時間處理，而最後也因為時間上不足，只做出了四點大部分情況能正確執行，覺得有點可惜。
          </div>
        </div>
      </div>
    </section>
	<section id="appen">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;附錄</h2>
				<ul>
					<li><a href="file/M063040007.jar">執行檔</a></li>
					<li><a href="file/M063040007.rar">原始碼</a></li>
					<li><a href="file/Test_in.txt">測試輸入檔</a></li>
					<li><a href="file/Test_out.txt">測試輸出檔</a></li>
				</ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Your Website 2017</p>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom JavaScript for this theme -->
    <script src="js/scrolling-nav.js"></script>

  </body>

</html>
